# ~/.tmux.conf - Microsoftè£½å“ç®¡ç†ãƒ„ãƒ¼ãƒ«é–‹ç™ºç’°å¢ƒç”¨tmuxè¨­å®š

# åŸºæœ¬è¨­å®š
unbind C-b
set-option -g prefix C-a
bind-key C-a send-prefix

# itmux/minttyç’°å¢ƒæœ€é©åŒ–
set -g mouse on
set -g default-terminal "screen-256color"
set -g terminal-overrides "xterm*:Tc"
set -g base-index 1
set -g pane-base-index 1

# Windows/Cygwinçµ±åˆ
set -g default-shell "/bin/bash"
set -g history-limit 10000
set -g escape-time 0

# ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ãƒ»ãƒšã‚¤ãƒ³æ“ä½œï¼ˆMicrosoftè£½å“ç®¡ç†ãƒ„ãƒ¼ãƒ«é–‹ç™ºå‘ã‘ï¼‰
bind | split-window -h -c "#{pane_current_path}"
bind - split-window -v -c "#{pane_current_path}"
bind c new-window -c "#{pane_current_path}"

# ãƒšã‚¤ãƒ³ç§»å‹•ï¼ˆvimé¢¨ï¼‰
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# ãƒšã‚¤ãƒ³ãƒªã‚µã‚¤ã‚ºï¼ˆçŸ¢å°ã‚­ãƒ¼å¯¾å¿œï¼‰
bind -r H resize-pane -L 5
bind -r J resize-pane -D 5
bind -r K resize-pane -U 5
bind -r L resize-pane -R 5

# ãƒšã‚¤ãƒ³ãƒªã‚µã‚¤ã‚ºï¼ˆçŸ¢å°ã‚­ãƒ¼ï¼‰
bind -r Left resize-pane -L 5
bind -r Down resize-pane -D 5
bind -r Up resize-pane -U 5
bind -r Right resize-pane -R 5

# PowerShell/CMDçµ±åˆ
bind P new-window -n "PowerShell" 'cmd.exe /c powershell.exe'
bind C new-window -n "CMD" 'cmd.exe'
bind W new-window -n "WinTools" 'cmd.exe /c "cd /d C:\tools && powershell.exe"'

# ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰çµ±åˆï¼ˆWindowsï¼‰
bind -T copy-mode-vi y send-keys -X copy-pipe-and-cancel "/dev/clipboard"
bind ] run "cat /dev/clipboard | tmux load-buffer - ; tmux paste-buffer"

# Microsoftè£½å“ç®¡ç†ãƒ„ãƒ¼ãƒ«ç‰¹åŒ–ãƒã‚¤ãƒ³ãƒ‰
bind G new-window -n "GUI-App" 'cd /cygdrive/c/workspace/MicrosoftProductManagementTools && bash'
bind A new-window -n "CLI-App" 'cd /cygdrive/c/workspace/MicrosoftProductManagementTools && bash'
bind S new-window -n "Scripts" 'cd /cygdrive/c/workspace/MicrosoftProductManagementTools/Scripts && bash'
bind T new-window -n "Test" 'cd /cygdrive/c/workspace/MicrosoftProductManagementTools/TestScripts && bash'
bind R new-window -n "Reports" 'cd /cygdrive/c/workspace/MicrosoftProductManagementTools/Reports && bash'
bind D new-window -n "Docs" 'cd /cygdrive/c/workspace/MicrosoftProductManagementTools/Docs && bash'

# é–‹ç™ºä½œæ¥­ç”¨ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ
bind M new-window -n "M365-Scripts" 'cd /cygdrive/c/workspace/MicrosoftProductManagementTools/Scripts/EntraID && bash'
bind E new-window -n "Exchange" 'cd /cygdrive/c/workspace/MicrosoftProductManagementTools/Scripts/EXO && bash'
bind O new-window -n "OneDrive" 'cd /cygdrive/c/workspace/MicrosoftProductManagementTools/Scripts/OneDrive && bash'

# ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†
bind r source-file ~/.tmux.conf \; display-message "Config reloaded!"
bind X confirm-before -p "kill-session #S? (y/n)" kill-session

# ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒãƒ¼ï¼ˆMicrosoftè£½å“ç®¡ç†ãƒ„ãƒ¼ãƒ«é–‹ç™ºå‘ã‘ï¼‰
set -g status-position bottom
set -g status-bg colour234
set -g status-fg colour137
set -g status-interval 1
set -g status-left '#[fg=colour233,bg=colour245,bold] ğŸ¯ M365-Tools #[fg=colour245,bg=colour235,nobold]'
set -g status-right '#[fg=colour233,bg=colour245,bold] %m/%d %H:%M:%S '
set -g status-right-length 50
set -g status-left-length 30

# ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦è¡¨ç¤ºï¼ˆã‚»ã‚¯ã‚·ãƒ§ãƒ³åè¡¨ç¤ºï¼‰
setw -g window-status-current-format ' #I#[fg=colour250]:#[fg=colour255]#W#[fg=colour50]#F '
setw -g window-status-format ' #I#[fg=colour237]:#[fg=colour250]#W#[fg=colour244]#F '

# ãƒšã‚¤ãƒ³å¢ƒç•Œï¼ˆè¦–èªæ€§å‘ä¸Šï¼‰
set -g pane-border-style 'fg=colour238 bg=colour235'
set -g pane-active-border-style 'fg=colour51 bg=colour235'

# ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚¹ã‚¿ã‚¤ãƒ«
set -g message-style 'fg=colour232 bg=colour166 bold'

# ã‚³ãƒ”ãƒ¼ãƒ¢ãƒ¼ãƒ‰è¨­å®š
setw -g mode-keys vi
bind-key -T copy-mode-vi 'v' send -X begin-selection
bind-key -T copy-mode-vi 'y' send -X copy-selection-and-cancel

# ãƒšã‚¤ãƒ³ã®è‡ªå‹•åˆ†å‰²è¨­å®šï¼ˆé–‹ç™ºè€…å‘ã‘ï¼‰
# 4ãƒšã‚¤ãƒ³æ§‹æˆã®è‡ªå‹•ä½œæˆ
bind 4 split-window -h \; split-window -v \; select-pane -t 0 \; split-window -v

# Microsoftè£½å“ç®¡ç†ãƒ„ãƒ¼ãƒ«å°‚ç”¨ã‚³ãƒãƒ³ãƒ‰
bind-key M-g run-shell "cd /cygdrive/c/workspace/MicrosoftProductManagementTools && cmd.exe /c 'powershell.exe -File Apps/GuiApp_Enhanced.ps1'"
bind-key M-c run-shell "cd /cygdrive/c/workspace/MicrosoftProductManagementTools && cmd.exe /c 'powershell.exe -File Apps/CliApp_Enhanced.ps1'"
bind-key M-t run-shell "cd /cygdrive/c/workspace/MicrosoftProductManagementTools && cmd.exe /c 'powershell.exe -File TestScripts/test-all-features.ps1'"

# ãƒ­ã‚°ç®¡ç†
bind-key M-l run-shell "cd /cygdrive/c/workspace/MicrosoftProductManagementTools/Logs && ls -la"

# ç·Šæ€¥æ™‚ã®å…¨ã‚»ãƒƒã‚·ãƒ§ãƒ³çµ‚äº†
bind-key M-q confirm-before -p "kill all sessions? (y/n)" "run-shell 'tmux kill-server'"

# é–‹ç™ºåŠ¹ç‡åŒ–
set -g renumber-windows on
set -g automatic-rename on
set -g automatic-rename-format '#(basename #{pane_current_path})'

# æ—¥æœ¬èªå¯¾å¿œ
set -g status-utf8 on
setw -g utf8 on