<!-- ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆçµ±åˆæƒ…å ± -->
<!-- çµ±åˆæ—¥æ™‚: 2025-07-22 22:02:05 -->
<!-- ã‚«ãƒ†ã‚´ãƒª: development -->
<!-- å„ªå…ˆåº¦: high -->
<!-- è‡ªå‹•çµ±åˆã‚·ã‚¹ãƒ†ãƒ ã«ã‚ˆã‚Šå‡¦ç† -->

# ğŸš€ Backend FastAPI ç·Šæ€¥åŠ é€ŸæŒ‡ç¤º

## ğŸ“Š **ç·Šæ€¥å®Ÿè£…è¦è«‹: 50% â†’ 90% é”æˆ**

### **ç¾çŠ¶åˆ†æ**
- ç¾åœ¨é€²æ—: 50%å®Œäº†
- ç›®æ¨™é€²æ—: 90%å®Œäº†
- å®Ÿè£…æœŸé™: Day 1 ç·Šæ€¥å¯¾å¿œ
- ä¸»è¦èª²é¡Œ: Microsoft Graph APIçµ±åˆãƒ»PowerShellãƒ–ãƒªãƒƒã‚¸çµ±åˆ

---

## ğŸ¯ **å³åº§å®Ÿè£…é …ç›®**

### 1. **Microsoft Graph APIçµ±åˆ** (å„ªå…ˆåº¦: æœ€é«˜)
```python
# Azure Key Vaultèªè¨¼ - READY
from auth.azure_key_vault_auth import AzureKeyVaultAuth

# Microsoft 365è³‡æ ¼æƒ…å ±è‡ªå‹•å–å¾—ã‚·ã‚¹ãƒ†ãƒ æ´»ç”¨
auth = AzureKeyVaultAuth()
m365_creds = auth.get_microsoft_365_credentials()
```

### 2. **FastAPI ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆå®Ÿè£…** (é€²æ—: 50%)
```python
# å¿…è¦ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ (26æ©Ÿèƒ½å¯¾å¿œ):
# - /api/reports/daily, weekly, monthly, yearly
# - /api/analysis/license, usage, performance, security
# - /api/entraid/users, mfa, conditional-access, signin-logs
# - /api/exchange/mailbox, mail-flow, spam-protection, delivery
# - /api/teams/usage, settings, meeting-quality, apps
# - /api/onedrive/storage, sharing, sync-errors, external-sharing
```

### 3. **PowerShell ãƒ–ãƒªãƒƒã‚¸çµ±åˆ** (å„ªå…ˆåº¦: é«˜)
```python
# PowerShell GuiApp_Enhanced.ps1 æ©Ÿèƒ½çµ±åˆ
# Exchange Online PowerShellçµ±åˆ
# Microsoft Graph PowerShellçµ±åˆ
from core.powershell_bridge import EnhancedPowerShellBridge
```

---

## âš¡ **ç·Šæ€¥å®Ÿè£…æ‰‹é †**

### **Step 1: FastAPIåŸºç›¤å®Œæˆ** (45åˆ†)
```python
# ãƒ•ã‚¡ã‚¤ãƒ«: /src/api/fastapi_server.py
from fastapi import FastAPI, HTTPException, Depends
from fastapi.security import HTTPBearer
from auth.azure_key_vault_auth import AzureKeyVaultAuth

app = FastAPI(title="Microsoft 365 Management API")

# èªè¨¼ã‚·ã‚¹ãƒ†ãƒ çµ±åˆ
async def get_auth_manager():
    return AzureKeyVaultAuth()

# 26æ©Ÿèƒ½ REST ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆå®Ÿè£…
```

### **Step 2: Microsoft Graph API ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆçµ±åˆ** (30åˆ†)
```python
# ãƒ•ã‚¡ã‚¤ãƒ«: /src/api/graph_client_unified.py
# æ—¢å­˜å®Ÿè£…æ´»ç”¨ãƒ»Azure Key Vaultçµ±åˆ
class UnifiedGraphClient:
    def __init__(self, auth_manager: AzureKeyVaultAuth):
        self.auth = auth_manager
        self.credentials = auth_manager.get_microsoft_365_credentials()
```

### **Step 3: PowerShell ãƒ–ãƒªãƒƒã‚¸çµ±åˆ** (30åˆ†)
```python
# Exchange Online PowerShellçµ±åˆ
# æ—¢å­˜ Scripts/EXO/ æ©Ÿèƒ½çµ±åˆ
# ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‹ã‚‰PowerShellã‚¹ã‚¯ãƒªãƒ—ãƒˆå®Ÿè¡Œ
```

### **Step 4: ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚° & ãƒ­ã‚°çµ±åˆ** (15åˆ†)
```python
# ç›£æŸ»è¨¼è·¡ãƒ»ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ãƒ»ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£è¦–
from compliance.audit_trail import AuditTrailManager
from core.logging_manager import UnifiedLoggingManager
```

---

## ğŸ“ˆ **é”æˆç›®æ¨™**

| æ©Ÿèƒ½ | ç¾åœ¨ | ç›®æ¨™ | ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ |
|------|------|------|----------|
| FastAPIåŸºç›¤ | 50% | 95% | 26ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆå®Œå…¨å®Ÿè£… |
| Graph APIçµ±åˆ | 30% | 90% | Azure Key Vaultçµ±åˆèªè¨¼ |
| PowerShellçµ±åˆ | 40% | 85% | Exchange Onlineãƒ»Graphçµ±åˆ |
| ã‚¨ãƒ©ãƒ¼å‡¦ç† | 60% | 90% | ç›£æŸ»è¨¼è·¡ãƒ»ãƒ­ã‚°çµ±åˆ |
| **ç·åˆé€²æ—** | **50%** | **90%** | **2æ™‚é–“ä»¥å†…é”æˆ** |

---

## ğŸ”§ **å³åº§ä½¿ç”¨å¯èƒ½ãƒªã‚½ãƒ¼ã‚¹**

### **å®Œæˆæ¸ˆã¿èªè¨¼ã‚·ã‚¹ãƒ†ãƒ **
- `AzureKeyVaultAuth`: Microsoft 365è³‡æ ¼æƒ…å ±è‡ªå‹•å–å¾—
- è¨¼æ˜æ›¸ãƒ»ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆãƒ»Managed Identityå¯¾å¿œ
- ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ—ãƒ©ã‚¤ã‚ºã‚°ãƒ¬ãƒ¼ãƒ‰ãƒ»æœ¬æ ¼é‹ç”¨å¯¾å¿œ

### **æ—¢å­˜PowerShellè³‡ç”£**
- `Scripts/EXO/`: Exchange Onlineç®¡ç†å®Œå‚™
- `Scripts/EntraID/`: Entra IDãƒ»Teamsãƒ»OneDriveç®¡ç†
- `Apps/GuiApp_Enhanced.ps1`: 26æ©Ÿèƒ½å®Ÿè£…æ¸ˆã¿

### **Microsoft Graphçµ±åˆ**
- Microsoft Graph SDK for Pythonçµ±åˆæº–å‚™æ¸ˆã¿
- Azure Key Vaultèªè¨¼çµ±åˆæº–å‚™æ¸ˆã¿
- ãƒãƒƒãƒå‡¦ç†ãƒ»ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°æº–å‚™æ¸ˆã¿

---

## ğŸ“‹ **å®Ÿè£…å¿…é ˆã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**

### **å®šæœŸãƒ¬ãƒãƒ¼ãƒˆ API** (5ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ)
```python
@app.get("/api/reports/daily")
@app.get("/api/reports/weekly") 
@app.get("/api/reports/monthly")
@app.get("/api/reports/yearly")
@app.post("/api/reports/test-execution")
```

### **åˆ†æãƒ¬ãƒãƒ¼ãƒˆ API** (5ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ)
```python
@app.get("/api/analysis/license")
@app.get("/api/analysis/usage")
@app.get("/api/analysis/performance")
@app.get("/api/analysis/security")
@app.get("/api/analysis/permission-audit")
```

### **Entra IDç®¡ç† API** (4ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ)
```python
@app.get("/api/entraid/users")
@app.get("/api/entraid/mfa-status")
@app.get("/api/entraid/conditional-access")
@app.get("/api/entraid/signin-logs")
```

### **Exchange Online API** (4ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ)
```python
@app.get("/api/exchange/mailbox-management")
@app.get("/api/exchange/mail-flow")
@app.get("/api/exchange/spam-protection")
@app.get("/api/exchange/delivery-analysis")
```

### **Teamsç®¡ç† API** (4ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ)
```python
@app.get("/api/teams/usage")
@app.get("/api/teams/settings")
@app.get("/api/teams/meeting-quality")
@app.get("/api/teams/apps-analysis")
```

### **OneDriveç®¡ç† API** (4ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ)
```python
@app.get("/api/onedrive/storage-analysis")
@app.get("/api/onedrive/sharing-analysis")
@app.get("/api/onedrive/sync-errors")
@app.get("/api/onedrive/external-sharing")
```

---

## âš ï¸ **ç·Šæ€¥å¯¾å¿œè¦æ±‚**

**ManageræŒ‡ç¤º**: Azure Key Vaultèªè¨¼çµ±åˆå®Œäº†ãƒ»Context7 APIæœ€é©åŒ–å®Œäº†

**Backend Team**: å³åº§ã«FastAPIåŸºç›¤å®Œæˆãƒ»Microsoft Graphçµ±åˆãƒ»PowerShellçµ±åˆå®Ÿè£…é–‹å§‹

**æœŸé™**: Day 1ç·Šæ€¥å¯¾å¿œã¨ã—ã¦**2æ™‚é–“ä»¥å†…å®Ÿè£…å®Œäº†**

**å ±å‘Š**: å®Ÿè£…å®Œäº†æ¬¡ç¬¬ã€é€²æ—90%é”æˆå ±å‘Šã‚’Managerã«æå‡º

---

### ğŸ“ **Manageré€£çµ¡å…ˆ**
- tmux pane é€šä¿¡
- tmux_shared_context.md é€²æ—æ›´æ–°
- ç·Šæ€¥æ™‚: å³åº§ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³

**Success Criteria**: FastAPI 90%å®Œæˆãƒ»Azureçµ±åˆãƒ»26ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆå‹•ä½œç¢ºèªãƒ»PowerShellçµ±åˆå®Œäº†